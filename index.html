<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hall's Theorem: a Treatise</title>
<link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div style="font-family:arial; font-size:50px; margin:auto">A game demonstrating Hall's Theorem</div>
<p>This is a game to demonstrate the famous theorem of Hall which says when there is a perfect matching on a bipartite graph.  The goal of the game is to win in one of two ways: either by choosing enough white squares that are all in separate columns, or by choosing enough rows and columns, all of whose intersections fall on black squares.  To play, click on either white squares within the board, or squares on the border.  The text below the game will let you know how close you are to victory.  You can adjust the size of the board, the positioning of the black and white squares, and the goal in the options menu.</p>
<div class="game-container"><div id="game"></div>
<div class="modal" id="modal">
    <div class="modal-content">
        <span class="close-button" id="close-button">&times;</span>
        <div style="font-family:arial; font-size:40px; margin:auto">You won!</div>
    </div>
</div>
<div class="modal" id="options">
    <div class="modal-content">
        <span class="close-button" id="optionsCloseButton">&times;</span>
        <div class="slidercontainer"><div class="options-container"><span style="font-family:arial; font-size:20px">X Dimension</span><span class="slippy"><input type="range" min="1" max="20" value="10" class="slider" id="xcoord"><span id="xcoord-val" style="font-family:arial; font-size:15px"></span></span></div><hr>

<div class="options-container"><span style="font-family:arial; font-size:20px">Y Dimension</span><span class="slippy"><input type="range" min="1" max="20" value="10" class="slider" id="ycoord"><span id="ycoord-val" style="font-family:arial; font-size:15px"></span></span></div><hr>

<div class="options-container"><span style="font-family:arial; font-size:20px">Goal</span><input type="range" min="1" max="20" value="10" class="slider" id="numwhites"><span id="num-whites-val" style="font-family:arial; font-size:15px"></span></div><hr>

<div class="options-container"><span style="font-family:arial; font-size:20px">Black Square Probability</span><span class="slippy"><input type="range" min="0" max="1" step="any" value="0.5" class="slider" id="probability"><span id="prob-val" style="font-family:arial; font-size:15px"></span></span></div><hr>

<div class="options-container"><span style="font-family:arial; font-size:20px">Accessibility Mode</span><span class="slippy"><input type="radio" id="accesson" name="accessibility" value="On"><label for="accesson" style="font-family:arial; font-size:15px">On</label><input type="radio" id="accessoff" name="accessibility" value="Off" checked="checked"><label for="accessoff" style="font-family:arial; font-size:15px">Off</label></span></div><hr>

<div class="options-container"><span style="font-family:arial; font-size:20px">Click to Toggle</span><span class="slippy"><input type="radio" id="clicktoggleon" name="clicktotoggle" value="On"><label for="clicktoggleon" style="font-family:arial; font-size:15px">On</label><input type="radio" id="clicktoggleoff" name="clicktotoggle" value="Off" checked="checked"><label for="clicktoggleoff" style="font-family:arial; font-size:15px">Off</label></span></div>
    </div>
</div></div></div>

<div id="remaining" style="font-family:arial; font-size:20px"></div>
<div class="slidercontainer" style="width:500px"><div class="slippy">
<span><input type="button" id="resetbutton" class="button-type" value="New Board"></span>&nbsp;<span><input type="button" id="clearboard" class="button-type" value="Clear Board"></span></div>&nbsp;<div class="slippy"><span><input type="button" id="solvebutton" class="button-type" value="Show Solution"></span>&nbsp;
<span><input type="button" id="openoptions" class="button-type" value="Show Options"></span></div></div>

<script src="app.js"></script>
<hr width=100%>
<div style="font-family:arial; font-size:30px; margin-left:auto; margin-right:auto">Explanation</div>
<p>The rest of this page will go over a precise statement of Hall's theorem, as well as its relation to this game and a proof.</p><p>Philip Hall proved his theorem in a paper called <i>On Representatives of Subsets</i> in 1934, and his statement of the theorem was about sets and representatives, but it's common now to discuss the theorem in terms of graph theory.  Recall the following definitions:</p>
<ul style="font-family:arial; font-size:20px"><li>A <i>graph</i> is a collection of dots, called <i>vertices</i>, and segments connecting those dots, called <i>edges</i>.</li>
<li>A <i>bipartite graph</i> is a graph for which the vertices can be split into two halves, so that no vertex has an edge to any other in its own half &mdash; all edges go between halves.</li>
<li>A <i>matching</i> on a bipartite graph is a set of edges so that every vertex, on both halves, is attached to exactly one edge.  We can generalize this definition in multiple ways: a matching on one side or the other is a collection of edges so that all vertices on that side is attached to exactly one edge.</li>
</ul>
<p>As an example, the picture below shows a bipartite graph, with a matching on the right vertices made of the darker edges.  Notice that there is no matching on the left vertices, because there are more of them!</p><div style="display:flex"><img src="matching-intro.png" style="max-width:336px; max-height:482px; width:auto; height:auto"><div style="display:flex; flex-direction:column; margin-top:auto; margin-bottom: auto"><p>If we consider a bipartite graph, the main question Hall answers is whether one side has a matching.  We consider an obvious obstruction: for any subset <i>A</i> of vertices on the right, their theoretical partners must exist on the left; so there must be at least as many vertices on the left attached to some element of <i>A</i> as there are in <i>A</i> itself.  For example, the first and second vertices on the right are attached to the first, second, third, fourth and fifth vertices on the left, so the obvious obstruction is avoided.  But Hall's theorem says that that's the ONLY obstruction!  It says the following:</p><p style="margin-left: 30px; margin-right:30px"><i>If <b>G</b> is a bipartite graph, divided into its two halves <b>S</b> and <b>T</b>, and if for any subset <b>A</b> of <b>S</b>, there are at least as many elements of <b>T</b> attached to something of <b>A</b> as there are elements in <b>A</b> itself, then there exists a matching of <b>S</b> in <b>G</b>.</i></p><p>So Hall's theorem says that there is only one obstruction, and it's the obvious one: either you can find a matching, or you can find vertices that explain why you can't.  In other words, you can either find edges that match up all nodes on one side with nodes on the other, or you can find some number of vertices on each side, none of whom have any edges connecting them.</div></div>
<p>And now we see the connection with our game!  If we imagine the rows as vertices on one side and the columns as the vertices on the other, and let the white squares be edges and black squares be non-edges, the theorem reduces to a very special case: that you can win in one way or another, assuming that the number of white squares you're looking for is exactly equal to the smaller of the two dimensions of the rectangle.  E.g. the graph above corresponds to the following game:</p><img src="game-intro.png" style="margin:auto"><p>What does it mean to change the goal?  How should we interpret the solutions in each goal?  We're no longer talking about matchings in the strictest sense, of course, but we can modify the terminology and talk about matchings of size <i>n</i> for some number <i>n</i>.  The edited version of Hall's theorem says:</p>
<p style="margin-left: 30px; margin-right:30px"><i>If <b>G</b> is a bipartite graph, divided into its two halves <b>S</b> and <b>T</b>, and if for any subset <b>A</b> of <b>S</b>, there are at least <b>n</b> fewer elements of <b>T</b> attached to something of <b>A</b> than elements in <b>A</b> itself, then there exists a matching between <b>S</b> and <b>T</b> of size equal to the number of elements of <b>S</b>, minus <b>n</b>.</i></p><p>Notice that this is another if and only if condition; you can't possibly win both ways, no matter what the goal.  If there is such a matching, then the worst collection you could choose is the collection that includes all elements of <i>S</i> that aren't part of any edge, but that allows the disparity between the number of elements you chose and their neighbors in <i>T</i> to be at most <i>n</i>; everyone has a partner except possibly <i>n</i> of them.</p>
<p>Before we move onto the proof, let us note one final interpretation of the game.  It is not programmed to allow the goal to become trivial, i.e. a nonpositive number of white squares, or more white squares than there are rows or columns, but the thrust of the theorem is still the same: if it's trivial in one direction, it's trivially impossible in the other direction.  With this in mind, if the board is left constant, as the goal increases from trivial to win with white to trivial to win with black, at some point the game switches over from being a win on white to a win on black.  At the gap between these two, we can find some number of whites, but we can also find some number of black rows and columns.  If we consider the rows and columns not selected in the win-by-black, these are the rows and columns that the white squares appear in.  To state the conclusion: <b>The maximum number of white squares in a black-and-white grid that are all in separate rows and columns, is exactly equal to the minimum number of columns and rows needed so that all the white squares appear in at least one of the rows or columns.</b></p>
<hr width=100%>
<div style="font-family:arial; font-size:30px; margin-left:auto; margin-right:auto">Proof</div>
<p>Now we look at the proof, and we'll approach it from the game context: why do we always have a win somewhere?  The proof will be inductive: it's obvious in the most trivial cases, where one of the dimensions is equal to 1, or more generally if the goal is to find either one white square or all rows and columns black, because certainly one of the two of those must occur in any such rectangle.  (To see that these are in fact complementary pieces of the same goal, notice that the two numbers in the goal always add up to one more than the sum of the dimensions of the rectangle.)</p>
<p>Now look at any board.  We think about how to start searching for a win with white, and the best way to begin is to find a white square.  (If you can't, you have certainly already won with black!)  Then we take the board that consists of all other rows and columns, and try and win with white in this smaller board.  Because the dimensions both reduce by 1, and the number of whites in the goal reduced by 1, the number of rows or columns in the complementary black goal reduced by 1 also.  We know by induction that we can win with this goal, by induction, so either we win with white, in which case we win the whole game with white, or we win with black.</p><p>As an example, consider the following game:</p><img src="proof1.png" style="margin-left:auto; margin-right:auto">
<p>Choosing the white in the top row gives us the following gameboard:</p><img src="proof2.png" style="margin-left:auto; margin-right:auto"><p>By induction, we can choose the following two white squares and win:</p><img src="proof3.png" style="margin-left:auto; margin-right:auto"><p>On the other hand, our random search might have gone astray, and choosing the more central square would leave us with this, a win-by-black situation:</p><img src="proof4.png" style="margin-left:auto; margin-right:auto"><p>The goal here is 5 columns or rows, so the win-by-black is the following:</p><img src="proof5.png" style="margin-left:auto; margin-right:auto">
<p>Now assuming that we didn't win by white immediately, the smaller rectangle returned a win-by-black.  Because the number of rows/columns required is one less in the smaller rectangle than in the bigger rectangle, our goal is to expand our black block by one unit.  So we focus on the black block, and the squares in the same row or same column as it.  These form two more blocks, shown below in our example.<p>
<img src="proof6.png" style="height:auto; width:auto; max-height:360px; max-width:540px; margin-left:auto; margin-right:auto; border-right: solid #000000">  <img src="proof7.png" style="height:auto; width:auto; max-height:360px; max-width:540px; margin-left:auto; margin-right:auto"><p>In each of these, in contrast to the previous usage of the inductive step, the goal is the smallest nontrivial black win, and therefore the largest nontrivial white win.  If either one is a black win, we can turn that into an overall black win, by selecting the columns or rows that were also part of the original black block, along with the rows or columns (the other dimension, the one that they don't share) that are part of either block.  You can check that you're throwing away one fewer column or row from the original block than row or column that you're newly including, so that increases the row-column sum by 1 and we have a win by black.</p>
<p>Otherwise, both are win-by-whites, and the only thing left to check is that the combined set of whites selected is enough for a global win-by-white.  It's enough to note that the smaller dimension in each of these smaller blocks is the dimension NOT shared with the original black block, so the number of white squares that we found plus the dimensions of that black block is equal to the dimensions of the whole shape.  But the goal for black was one more than the sum of dimensions of the black block we discovered, so the complementary goal for white is exactly equal to the number of squares we actually found.  Thus we have a win-by-white.</p>
<p>In short, the proof ends up just being a us going through and trying to construct a win.  First we try to win with white, and if that's not immediately possible, we try to win with black, and if both paths to win by black are blocked, that means that we must have a win by white again.  Somehow the dimensions all conspire to work out in the end, and all that's required is diligent bookkeeping.</p>
<hr width=100%><p>An interesting topic that we don't discuss here, but is explored in a complementary YouTube video (coming soon!), is the number of results that Hall's theorem is equivalent to.  The <i>"you must have one or the other, but not both"</i> nature of the theorem leads to some very satisfying results, that boil down to statements like <i>"I can find <b>n</b> things, and I can prove that I can't find any more because I found <b>n</b> other things."</i> An example would be <i>"I can find <b>n</b> white squares in different rows and columns, and I can prove that I can't find any more because I found <b>n</b> rows and columns that contain all white squares."</i>  This <i>minimax</i> style of theorem can be encompassed in the theory of linear duality, and I encourage you to check out the YouTube video linked above!</p>
</body>
<hr width=100%>
 <footer>
  <p style="text-align:center">Â© Noah Taylor, 2022</p>
</footer> 
</html>